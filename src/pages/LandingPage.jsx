import React, { useState, useEffect, useRef, useCallback } from "react";
import api from "../services/api";
import {
  Search,
  FileText,
  ArrowRight,
  User,
  Heart,
  Download,
  Eye,
  Menu,
  X,
} from "lucide-react";
import { Link, useNavigate } from "react-router-dom";
import { useAuth } from "../context/AuthContext";
import containerLogo from "../assets/Container.png";

// Icon colors for paper cards — cycles through a set
const iconColors = [
  { bg: "bg-blue-50", text: "text-blue-500" },
  { bg: "bg-green-50", text: "text-green-500" },
  { bg: "bg-red-50", text: "text-red-500" },
  { bg: "bg-purple-50", text: "text-purple-500" },
  { bg: "bg-yellow-50", text: "text-yellow-600" },
  { bg: "bg-pink-50", text: "text-pink-500" },
];

const LandingPage = () => {
  const { user, openLoginModal, logout } = useAuth();
  const navigate = useNavigate();
  const [recentPapers, setRecentPapers] = useState([]);
  const [initialPapers, setInitialPapers] = useState([]);
  const [searchTerm, setSearchTerm] = useState("");
  const [isSearching, setIsSearching] = useState(false);
  const [isLoading, setIsLoading] = useState(false);
  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);

  useEffect(() => {
    fetchRecentPapers();
  }, []);

  const fetchRecentPapers = async () => {
    try {
      setIsLoading(true);
      const response = await api.get("/papers");
      const papers = response.data.slice(0, 6);
      setRecentPapers(papers);
      setInitialPapers(papers);
    } catch (error) {
      console.error("Error fetching papers:", error);
    } finally {
      setIsLoading(false);
    }
  };

  // Live search logic - updates the main grid directly
  useEffect(() => {
    const timer = setTimeout(async () => {
      if (searchTerm.trim().length > 1) {
        try {
          setIsLoading(true);
          setIsSearching(true);
          const response = await api.get("/papers", {
            params: { q: searchTerm },
          });
          setRecentPapers(response.data.slice(0, 6));
        } catch (error) {
          console.error("Error fetching search results:", error);
        } finally {
          setIsLoading(false);
        }
      } else if (searchTerm.trim() === "") {
        setRecentPapers(initialPapers);
        setIsSearching(false);
      }
    }, 400);

    return () => clearTimeout(timer);
  }, [searchTerm, initialPapers]);

  const onSearchSubmit = (e) => {
    e.preventDefault();
  };

  const handleDownload = async (id, title) => {
    if (!user) {
      openLoginModal();
      return;
    }
    try {
      const response = await api.get(`/papers/download/${id}`, {
        responseType: "blob",
      });
      const url = window.URL.createObjectURL(new Blob([response.data]));
      const link = document.createElement("a");
      link.href = url;
      link.setAttribute("download", `${title}.pdf`);
      document.body.appendChild(link);
      link.click();
      link.remove();

      // Update local state for downloads
      setRecentPapers(
        recentPapers.map((p) =>
          p.id === id ? { ...p, downloads: (p.downloads || 0) + 1 } : p,
        ),
      );
    } catch (error) {
      console.error("Error downloading file:", error);
    }
  };

  return (
    <div
      className="bg-white min-h-screen text-gray-900"
      style={{ fontFamily: "'Inter', sans-serif" }}
    >
      {/* ── NAVBAR ── */}
      <nav className="fixed top-0 left-0 right-0 z-50 bg-white/90 backdrop-blur-md border-b border-gray-50">
        <div className="max-w-7xl mx-auto px-6 lg:px-8 h-16 flex items-center justify-between">
          {/* Logo */}
          <Link to="/" className="flex items-center gap-3">
            <div className="leading-none flex flex-col justify-center max-w-[200px] md:max-w-[250px]">
              <img
                src={containerLogo}
                alt="Kristu Jayanti"
                className="w-auto object-contain"
              />
            </div>
          </Link>

          {/* Desktop nav (hidden on mobile) */}
          <div className="hidden md:flex items-center gap-5">
            {user ? (
              <>
                <button
                  onClick={() => {
                    logout();
                  }}
                  className="text-xs text-gray-600 hover:text-black font-semibold transition-colors"
                >
                  Log out
                </button>
                <button className="text-gray-500 hover:text-black transition-colors">
                  <User className="w-[18px] h-[18px]" />
                </button>
                <Link
                  to="/favourites"
                  className="text-gray-500 hover:text-red-500 transition-colors"
                  title="My Favourites"
                >
                  <Heart className="w-[18px] h-[18px]" />
                </Link>
              </>
            ) : (
              <>
                <button
                  onClick={openLoginModal}
                  className="text-xs text-gray-600 hover:text-black font-semibold transition-colors"
                >
                  Log In
                </button>
                <button
                  onClick={openLoginModal}
                  className="text-gray-500 hover:text-black transition-colors"
                  title="Login to view profile"
                >
                  <User className="w-[18px] h-[18px]" />
                </button>
                <button
                  onClick={openLoginModal}
                  className="text-gray-500 hover:text-black transition-colors"
                  title="Login to view favourites"
                >
                  <Heart className="w-[18px] h-[18px]" />
                </button>
              </>
            )}
          </div>

          {/* Hamburger button (mobile only) */}
          <button
            className="md:hidden text-gray-700 hover:text-black transition-colors p-1"
            onClick={() => setMobileMenuOpen(!mobileMenuOpen)}
            aria-label="Toggle menu"
          >
            {mobileMenuOpen ? (
              <X className="w-6 h-6" />
            ) : (
              <Menu className="w-6 h-6" />
            )}
          </button>
        </div>

        {/* Mobile menu panel */}
        <div
          className={`md:hidden overflow-hidden transition-all duration-300 ease-in-out ${
            mobileMenuOpen ? "max-h-60 border-t border-gray-100" : "max-h-0"
          }`}
        >
          <div className="px-6 py-4 bg-white/95 backdrop-blur-md flex flex-col gap-3">
            {user ? (
              <>
                <Link
                  to="/favourites"
                  className="flex items-center gap-3 py-2 text-sm text-gray-700 hover:text-red-500 font-medium transition-colors"
                  onClick={() => setMobileMenuOpen(false)}
                >
                  <Heart className="w-4 h-4" />
                  My Favourites
                </Link>
                <div className="flex items-center gap-3 py-2 text-sm text-gray-700">
                  <User className="w-4 h-4" />
                  {user.username || user.email}
                </div>
                <button
                  onClick={() => {
                    logout();
                    setMobileMenuOpen(false);
                  }}
                  className="flex items-center gap-3 py-2 text-sm text-red-500 hover:text-red-600 font-medium transition-colors"
                >
                  Log out
                </button>
              </>
            ) : (
              <>
                <button
                  onClick={() => {
                    openLoginModal();
                    setMobileMenuOpen(false);
                  }}
                  className="w-full text-center bg-gray-900 text-white py-2.5 rounded-xl text-sm font-semibold hover:bg-black transition-colors"
                >
                  Log In
                </button>
              </>
            )}
          </div>
        </div>
      </nav>

      {/* ── HERO ── */}
      <section className="pt-32 pb-16 px-6 lg:px-8">
        <div className="max-w-6xl  w-full justify-between mx-auto flex flex-col lg:flex-row items-center justify-between gap-12 lg:gap-20">
          {/* Left – QVault brand */}
          <div className="flex flex-col items-center lg:items-start flex-shrink-0 select-none">
            <div className="relative w-[180px] sm:w-[240px] lg:w-[480px] md:[300px]">
              {/* Q SVG */}
              <svg
                className="w-full h-auto"
                xmlns="http://www.w3.org/2000/svg"
                width="488"
                height="456"
                viewBox="0 0 488 456"
                fill="none"
              >
                <path
                  d="M139.511 419.455H141.528L145.562 426.244H145.733L149.767 419.455H151.784L146.528 428.006V434H144.767V428.006L139.511 419.455ZM156.275 434.227C155.29 434.227 154.426 433.993 153.682 433.524C152.944 433.055 152.366 432.4 151.949 431.557C151.537 430.714 151.331 429.729 151.331 428.602C151.331 427.466 151.537 426.474 151.949 425.626C152.366 424.779 152.944 424.121 153.682 423.652C154.426 423.183 155.29 422.949 156.275 422.949C157.259 422.949 158.121 423.183 158.86 423.652C159.603 424.121 160.181 424.779 160.593 425.626C161.009 426.474 161.218 427.466 161.218 428.602C161.218 429.729 161.009 430.714 160.593 431.557C160.181 432.4 159.603 433.055 158.86 433.524C158.121 433.993 157.259 434.227 156.275 434.227ZM156.275 432.722C157.023 432.722 157.638 432.53 158.121 432.146C158.604 431.763 158.962 431.259 159.194 430.634C159.426 430.009 159.542 429.331 159.542 428.602C159.542 427.873 159.426 427.194 159.194 426.564C158.962 425.934 158.604 425.425 158.121 425.037C157.638 424.649 157.023 424.455 156.275 424.455C155.526 424.455 154.911 424.649 154.428 425.037C153.945 425.425 153.587 425.934 153.355 426.564C153.123 427.194 153.007 427.873 153.007 428.602C153.007 429.331 153.123 430.009 153.355 430.634C153.587 431.259 153.945 431.763 154.428 432.146C154.911 432.53 155.526 432.722 156.275 432.722ZM170.202 429.54V423.091H171.878V434H170.202V432.153H170.088C169.833 432.707 169.435 433.179 168.895 433.567C168.355 433.95 167.674 434.142 166.85 434.142C166.168 434.142 165.562 433.993 165.032 433.695C164.501 433.392 164.085 432.937 163.782 432.331C163.479 431.72 163.327 430.951 163.327 430.023V423.091H165.003V429.909C165.003 430.705 165.226 431.339 165.671 431.812C166.121 432.286 166.694 432.523 167.39 432.523C167.806 432.523 168.23 432.416 168.661 432.203C169.096 431.99 169.461 431.663 169.755 431.223C170.053 430.783 170.202 430.222 170.202 429.54ZM174.499 434V423.091H176.118V424.739H176.232C176.431 424.199 176.791 423.761 177.311 423.425C177.832 423.089 178.419 422.92 179.073 422.92C179.196 422.92 179.35 422.923 179.534 422.928C179.719 422.932 179.859 422.939 179.953 422.949V424.653C179.897 424.639 179.766 424.618 179.563 424.589C179.364 424.556 179.153 424.54 178.931 424.54C178.4 424.54 177.927 424.651 177.51 424.874C177.098 425.091 176.772 425.394 176.53 425.783C176.293 426.166 176.175 426.604 176.175 427.097V434H174.499ZM194.849 423.091C194.763 422.371 194.418 421.812 193.812 421.415C193.206 421.017 192.462 420.818 191.582 420.818C190.938 420.818 190.374 420.922 189.891 421.131C189.413 421.339 189.039 421.625 188.769 421.99C188.504 422.355 188.371 422.769 188.371 423.233C188.371 423.621 188.464 423.955 188.648 424.234C188.838 424.509 189.079 424.739 189.373 424.923C189.666 425.103 189.974 425.252 190.296 425.371C190.618 425.484 190.914 425.577 191.184 425.648L192.661 426.045C193.04 426.145 193.461 426.282 193.925 426.457C194.394 426.633 194.842 426.872 195.268 427.175C195.699 427.473 196.054 427.857 196.333 428.325C196.612 428.794 196.752 429.369 196.752 430.051C196.752 430.837 196.546 431.547 196.134 432.182C195.727 432.816 195.13 433.321 194.344 433.695C193.563 434.069 192.614 434.256 191.496 434.256C190.455 434.256 189.553 434.088 188.79 433.751C188.033 433.415 187.436 432.946 187.001 432.345C186.57 431.744 186.326 431.045 186.269 430.25H188.087C188.135 430.799 188.319 431.254 188.641 431.614C188.968 431.969 189.38 432.234 189.877 432.409C190.379 432.58 190.919 432.665 191.496 432.665C192.169 432.665 192.772 432.556 193.308 432.338C193.843 432.116 194.266 431.808 194.579 431.415C194.891 431.017 195.048 430.553 195.048 430.023C195.048 429.54 194.913 429.147 194.643 428.844C194.373 428.541 194.018 428.295 193.577 428.105C193.137 427.916 192.661 427.75 192.15 427.608L190.36 427.097C189.224 426.77 188.324 426.304 187.661 425.697C186.998 425.091 186.667 424.298 186.667 423.318C186.667 422.504 186.887 421.794 187.327 421.188C187.772 420.577 188.369 420.103 189.117 419.767C189.87 419.426 190.71 419.256 191.638 419.256C192.576 419.256 193.409 419.424 194.138 419.76C194.868 420.091 195.445 420.546 195.871 421.124C196.302 421.701 196.53 422.357 196.553 423.091H194.849ZM200.648 427.438V434H198.972V419.455H200.648V424.795H200.79C201.045 424.232 201.429 423.785 201.94 423.453C202.456 423.117 203.143 422.949 204 422.949C204.743 422.949 205.394 423.098 205.953 423.396C206.512 423.69 206.945 424.142 207.253 424.753C207.565 425.359 207.722 426.131 207.722 427.068V434H206.045V427.182C206.045 426.315 205.821 425.645 205.371 425.172C204.926 424.694 204.308 424.455 203.517 424.455C202.968 424.455 202.475 424.571 202.04 424.803C201.609 425.035 201.268 425.373 201.017 425.818C200.771 426.263 200.648 426.803 200.648 427.438ZM214.771 434.227C213.786 434.227 212.922 433.993 212.178 433.524C211.44 433.055 210.862 432.4 210.445 431.557C210.033 430.714 209.827 429.729 209.827 428.602C209.827 427.466 210.033 426.474 210.445 425.626C210.862 424.779 211.44 424.121 212.178 423.652C212.922 423.183 213.786 422.949 214.771 422.949C215.755 422.949 216.617 423.183 217.356 423.652C218.099 424.121 218.677 424.779 219.089 425.626C219.505 426.474 219.714 427.466 219.714 428.602C219.714 429.729 219.505 430.714 219.089 431.557C218.677 432.4 218.099 433.055 217.356 433.524C216.617 433.993 215.755 434.227 214.771 434.227ZM214.771 432.722C215.519 432.722 216.134 432.53 216.617 432.146C217.1 431.763 217.458 431.259 217.69 430.634C217.922 430.009 218.038 429.331 218.038 428.602C218.038 427.873 217.922 427.194 217.69 426.564C217.458 425.934 217.1 425.425 216.617 425.037C216.134 424.649 215.519 424.455 214.771 424.455C214.022 424.455 213.407 424.649 212.924 425.037C212.441 425.425 212.084 425.934 211.852 426.564C211.62 427.194 211.504 427.873 211.504 428.602C211.504 429.331 211.62 430.009 211.852 430.634C212.084 431.259 212.441 431.763 212.924 432.146C213.407 432.53 214.022 432.722 214.771 432.722ZM221.823 434V423.091H223.442V424.739H223.556C223.755 424.199 224.115 423.761 224.636 423.425C225.156 423.089 225.744 422.92 226.397 422.92C226.52 422.92 226.674 422.923 226.859 422.928C227.043 422.932 227.183 422.939 227.278 422.949V424.653C227.221 424.639 227.091 424.618 226.887 424.589C226.688 424.556 226.478 424.54 226.255 424.54C225.725 424.54 225.251 424.651 224.835 424.874C224.423 425.091 224.096 425.394 223.854 425.783C223.618 426.166 223.499 426.604 223.499 427.097V434H221.823ZM234.243 423.091V424.511H228.59V423.091H234.243ZM230.238 420.477H231.914V430.875C231.914 431.348 231.982 431.704 232.12 431.94C232.262 432.172 232.442 432.329 232.659 432.409C232.882 432.485 233.116 432.523 233.363 432.523C233.547 432.523 233.699 432.513 233.817 432.494C233.935 432.471 234.03 432.452 234.101 432.438L234.442 433.943C234.328 433.986 234.17 434.028 233.966 434.071C233.763 434.118 233.505 434.142 233.192 434.142C232.719 434.142 232.255 434.04 231.8 433.837C231.35 433.633 230.976 433.323 230.678 432.906C230.384 432.49 230.238 431.964 230.238 431.33V420.477ZM240.63 434.227C239.607 434.227 238.727 433.986 237.988 433.503C237.249 433.02 236.681 432.355 236.283 431.507C235.886 430.66 235.687 429.691 235.687 428.602C235.687 427.494 235.89 426.517 236.298 425.669C236.71 424.817 237.282 424.152 238.016 423.673C238.755 423.19 239.617 422.949 240.602 422.949C241.369 422.949 242.06 423.091 242.675 423.375C243.291 423.659 243.795 424.057 244.188 424.568C244.581 425.08 244.825 425.676 244.92 426.358H243.244C243.116 425.861 242.832 425.42 242.391 425.037C241.956 424.649 241.369 424.455 240.63 424.455C239.977 424.455 239.404 424.625 238.911 424.966C238.424 425.302 238.042 425.778 237.768 426.393C237.498 427.004 237.363 427.722 237.363 428.545C237.363 429.388 237.496 430.122 237.761 430.747C238.031 431.372 238.409 431.857 238.897 432.203C239.389 432.549 239.967 432.722 240.63 432.722C241.066 432.722 241.461 432.646 241.816 432.494C242.171 432.343 242.472 432.125 242.718 431.841C242.964 431.557 243.139 431.216 243.244 430.818H244.92C244.825 431.462 244.591 432.042 244.217 432.558C243.847 433.07 243.357 433.477 242.746 433.78C242.14 434.078 241.435 434.227 240.63 434.227ZM253.796 429.54V423.091H255.472V434H253.796V432.153H253.682C253.426 432.707 253.029 433.179 252.489 433.567C251.949 433.95 251.267 434.142 250.444 434.142C249.762 434.142 249.156 433.993 248.625 433.695C248.095 433.392 247.678 432.937 247.375 432.331C247.072 431.72 246.921 430.951 246.921 430.023V423.091H248.597V429.909C248.597 430.705 248.819 431.339 249.265 431.812C249.714 432.286 250.287 432.523 250.983 432.523C251.4 432.523 251.824 432.416 252.255 432.203C252.69 431.99 253.055 431.663 253.348 431.223C253.647 430.783 253.796 430.222 253.796 429.54ZM262.837 423.091V424.511H257.184V423.091H262.837ZM258.831 420.477H260.507V430.875C260.507 431.348 260.576 431.704 260.713 431.94C260.855 432.172 261.035 432.329 261.253 432.409C261.476 432.485 261.71 432.523 261.956 432.523C262.141 432.523 262.292 432.513 262.411 432.494C262.529 432.471 262.624 432.452 262.695 432.438L263.036 433.943C262.922 433.986 262.764 434.028 262.56 434.071C262.356 434.118 262.098 434.142 261.786 434.142C261.312 434.142 260.848 434.04 260.394 433.837C259.944 433.633 259.57 433.323 259.272 432.906C258.978 432.49 258.831 431.964 258.831 431.33V420.477ZM274.829 423.091V424.511H269.176V423.091H274.829ZM270.824 420.477H272.5V430.875C272.5 431.348 272.568 431.704 272.706 431.94C272.848 432.172 273.028 432.329 273.245 432.409C273.468 432.485 273.702 432.523 273.949 432.523C274.133 432.523 274.285 432.513 274.403 432.494C274.521 432.471 274.616 432.452 274.687 432.438L275.028 433.943C274.914 433.986 274.756 434.028 274.552 434.071C274.349 434.118 274.091 434.142 273.778 434.142C273.305 434.142 272.841 434.04 272.386 433.837C271.936 433.633 271.562 433.323 271.264 432.906C270.97 432.49 270.824 431.964 270.824 431.33V420.477ZM281.216 434.227C280.231 434.227 279.367 433.993 278.624 433.524C277.885 433.055 277.307 432.4 276.891 431.557C276.479 430.714 276.273 429.729 276.273 428.602C276.273 427.466 276.479 426.474 276.891 425.626C277.307 424.779 277.885 424.121 278.624 423.652C279.367 423.183 280.231 422.949 281.216 422.949C282.201 422.949 283.063 423.183 283.801 423.652C284.545 424.121 285.122 424.779 285.534 425.626C285.951 426.474 286.159 427.466 286.159 428.602C286.159 429.729 285.951 430.714 285.534 431.557C285.122 432.4 284.545 433.055 283.801 433.524C283.063 433.993 282.201 434.227 281.216 434.227ZM281.216 432.722C281.964 432.722 282.58 432.53 283.062 432.146C283.545 431.763 283.903 431.259 284.135 430.634C284.367 430.009 284.483 429.331 284.483 428.602C284.483 427.873 284.367 427.194 284.135 426.564C283.903 425.934 283.545 425.425 283.062 425.037C282.58 424.649 281.964 424.455 281.216 424.455C280.468 424.455 279.852 424.649 279.369 425.037C278.886 425.425 278.529 425.934 278.297 426.564C278.065 427.194 277.949 427.873 277.949 428.602C277.949 429.331 278.065 430.009 278.297 430.634C278.529 431.259 278.886 431.763 279.369 432.146C279.852 432.53 280.468 432.722 281.216 432.722ZM301.626 423.091C301.541 422.371 301.195 421.812 300.589 421.415C299.983 421.017 299.24 420.818 298.359 420.818C297.715 420.818 297.152 420.922 296.669 421.131C296.19 421.339 295.816 421.625 295.547 421.99C295.281 422.355 295.149 422.769 295.149 423.233C295.149 423.621 295.241 423.955 295.426 424.234C295.615 424.509 295.857 424.739 296.15 424.923C296.444 425.103 296.752 425.252 297.074 425.371C297.395 425.484 297.691 425.577 297.961 425.648L299.439 426.045C299.817 426.145 300.239 426.282 300.703 426.457C301.172 426.633 301.619 426.872 302.045 427.175C302.476 427.473 302.831 427.857 303.11 428.325C303.39 428.794 303.529 429.369 303.529 430.051C303.529 430.837 303.324 431.547 302.912 432.182C302.504 432.816 301.908 433.321 301.122 433.695C300.341 434.069 299.391 434.256 298.274 434.256C297.232 434.256 296.33 434.088 295.568 433.751C294.81 433.415 294.214 432.946 293.778 432.345C293.347 431.744 293.103 431.045 293.047 430.25H294.865C294.912 430.799 295.097 431.254 295.419 431.614C295.745 431.969 296.157 432.234 296.654 432.409C297.156 432.58 297.696 432.665 298.274 432.665C298.946 432.665 299.55 432.556 300.085 432.338C300.62 432.116 301.044 431.808 301.356 431.415C301.669 431.017 301.825 430.553 301.825 430.023C301.825 429.54 301.69 429.147 301.42 428.844C301.15 428.541 300.795 428.295 300.355 428.105C299.914 427.916 299.439 427.75 298.927 427.608L297.137 427.097C296.001 426.77 295.101 426.304 294.439 425.697C293.776 425.091 293.444 424.298 293.444 423.318C293.444 422.504 293.664 421.794 294.105 421.188C294.55 420.577 295.146 420.103 295.895 419.767C296.647 419.426 297.488 419.256 298.416 419.256C299.353 419.256 300.187 419.424 300.916 419.76C301.645 420.091 302.223 420.546 302.649 421.124C303.08 421.701 303.307 422.357 303.331 423.091H301.626ZM305.749 434V423.091H307.368V424.795H307.51C307.738 424.213 308.105 423.761 308.611 423.439C309.118 423.112 309.726 422.949 310.436 422.949C311.156 422.949 311.755 423.112 312.233 423.439C312.716 423.761 313.093 424.213 313.363 424.795H313.476C313.756 424.232 314.175 423.785 314.733 423.453C315.292 423.117 315.962 422.949 316.743 422.949C317.719 422.949 318.516 423.254 319.137 423.865C319.757 424.471 320.067 425.416 320.067 426.699V434H318.391V426.699C318.391 425.894 318.171 425.319 317.73 424.973C317.29 424.627 316.772 424.455 316.175 424.455C315.408 424.455 314.814 424.687 314.392 425.151C313.971 425.61 313.76 426.192 313.76 426.898V434H312.056V426.528C312.056 425.908 311.855 425.409 311.452 425.03C311.05 424.646 310.531 424.455 309.897 424.455C309.461 424.455 309.054 424.571 308.675 424.803C308.301 425.035 307.998 425.357 307.766 425.768C307.539 426.176 307.425 426.647 307.425 427.182V434H305.749ZM325.893 434.256C325.201 434.256 324.574 434.125 324.011 433.865C323.447 433.6 323 433.219 322.668 432.722C322.337 432.22 322.171 431.614 322.171 430.903C322.171 430.278 322.294 429.772 322.54 429.384C322.787 428.991 323.116 428.683 323.528 428.46C323.94 428.238 324.394 428.072 324.891 427.963C325.393 427.849 325.897 427.759 326.404 427.693C327.067 427.608 327.604 427.544 328.016 427.501C328.433 427.454 328.736 427.376 328.925 427.267C329.12 427.158 329.217 426.969 329.217 426.699V426.642C329.217 425.941 329.025 425.397 328.641 425.009C328.263 424.62 327.687 424.426 326.915 424.426C326.115 424.426 325.488 424.601 325.033 424.952C324.579 425.302 324.259 425.676 324.075 426.074L322.484 425.506C322.768 424.843 323.147 424.327 323.62 423.957C324.098 423.583 324.619 423.323 325.183 423.176C325.751 423.025 326.309 422.949 326.859 422.949C327.209 422.949 327.612 422.991 328.066 423.077C328.525 423.157 328.968 423.325 329.394 423.581C329.825 423.837 330.183 424.223 330.467 424.739C330.751 425.255 330.893 425.946 330.893 426.812V434H329.217V432.523H329.131C329.018 432.759 328.828 433.013 328.563 433.283C328.298 433.553 327.945 433.782 327.505 433.972C327.065 434.161 326.527 434.256 325.893 434.256ZM326.148 432.75C326.811 432.75 327.37 432.62 327.825 432.359C328.284 432.099 328.629 431.763 328.862 431.351C329.098 430.939 329.217 430.506 329.217 430.051V428.517C329.146 428.602 328.989 428.68 328.748 428.751C328.511 428.818 328.237 428.877 327.924 428.929C327.616 428.976 327.316 429.019 327.022 429.057C326.733 429.09 326.499 429.118 326.319 429.142C325.883 429.199 325.476 429.291 325.097 429.419C324.723 429.542 324.42 429.729 324.188 429.98C323.961 430.226 323.847 430.562 323.847 430.989C323.847 431.571 324.063 432.011 324.494 432.31C324.929 432.603 325.481 432.75 326.148 432.75ZM333.503 434V423.091H335.122V424.739H335.236C335.435 424.199 335.795 423.761 336.315 423.425C336.836 423.089 337.423 422.92 338.077 422.92C338.2 422.92 338.354 422.923 338.538 422.928C338.723 422.932 338.863 422.939 338.957 422.949V424.653C338.901 424.639 338.77 424.618 338.567 424.589C338.368 424.556 338.157 424.54 337.935 424.54C337.404 424.54 336.931 424.651 336.514 424.874C336.102 425.091 335.776 425.394 335.534 425.783C335.297 426.166 335.179 426.604 335.179 427.097V434H333.503ZM345.923 423.091V424.511H340.27V423.091H345.923ZM341.917 420.477H343.593V430.875C343.593 431.348 343.662 431.704 343.799 431.94C343.941 432.172 344.121 432.329 344.339 432.409C344.562 432.485 344.796 432.523 345.042 432.523C345.227 432.523 345.378 432.513 345.497 432.494C345.615 432.471 345.71 432.452 345.781 432.438L346.122 433.943C346.008 433.986 345.85 434.028 345.646 434.071C345.442 434.118 345.184 434.142 344.872 434.142C344.398 434.142 343.934 434.04 343.48 433.837C343.03 433.633 342.656 433.323 342.358 432.906C342.064 432.49 341.917 431.964 341.917 431.33V420.477ZM352.452 434.227C351.401 434.227 350.494 433.995 349.732 433.531C348.974 433.062 348.389 432.409 347.977 431.571C347.57 430.728 347.366 429.748 347.366 428.631C347.366 427.513 347.57 426.528 347.977 425.676C348.389 424.819 348.962 424.152 349.696 423.673C350.435 423.19 351.296 422.949 352.281 422.949C352.849 422.949 353.411 423.044 353.964 423.233C354.518 423.422 355.023 423.73 355.477 424.156C355.932 424.578 356.294 425.136 356.564 425.832C356.834 426.528 356.969 427.385 356.969 428.403V429.114H348.56V427.665H355.264C355.264 427.049 355.141 426.5 354.895 426.017C354.653 425.534 354.308 425.153 353.858 424.874C353.413 424.594 352.887 424.455 352.281 424.455C351.614 424.455 351.036 424.62 350.548 424.952C350.065 425.278 349.694 425.705 349.433 426.23C349.173 426.756 349.043 427.319 349.043 427.92V428.886C349.043 429.71 349.185 430.409 349.469 430.982C349.758 431.55 350.158 431.983 350.669 432.281C351.18 432.575 351.775 432.722 352.452 432.722C352.892 432.722 353.29 432.66 353.645 432.537C354.005 432.409 354.315 432.22 354.575 431.969C354.836 431.713 355.037 431.396 355.179 431.017L356.798 431.472C356.628 432.021 356.341 432.504 355.939 432.92C355.536 433.332 355.039 433.654 354.447 433.886C353.856 434.114 353.19 434.227 352.452 434.227ZM359.069 434V423.091H360.689V424.739H360.802C361.001 424.199 361.361 423.761 361.882 423.425C362.403 423.089 362.99 422.92 363.643 422.92C363.766 422.92 363.92 422.923 364.105 422.928C364.289 422.932 364.429 422.939 364.524 422.949V424.653C364.467 424.639 364.337 424.618 364.133 424.589C363.934 424.556 363.724 424.54 363.501 424.54C362.971 424.54 362.497 424.651 362.081 424.874C361.669 425.091 361.342 425.394 361.1 425.783C360.864 426.166 360.745 426.604 360.745 427.097V434H359.069ZM371.464 434V419.455H376.379C377.52 419.455 378.453 419.661 379.178 420.072C379.907 420.48 380.446 421.031 380.797 421.727C381.147 422.423 381.322 423.2 381.322 424.057C381.322 424.914 381.147 425.693 380.797 426.393C380.451 427.094 379.916 427.653 379.192 428.07C378.467 428.482 377.539 428.688 376.408 428.688H372.885V427.125H376.351C377.132 427.125 377.759 426.99 378.233 426.72C378.706 426.45 379.05 426.086 379.263 425.626C379.481 425.162 379.589 424.639 379.589 424.057C379.589 423.474 379.481 422.954 379.263 422.494C379.05 422.035 378.704 421.675 378.226 421.415C377.748 421.15 377.113 421.017 376.322 421.017H373.226V434H371.464ZM383.483 434V423.091H385.103V424.739H385.216C385.415 424.199 385.775 423.761 386.296 423.425C386.817 423.089 387.404 422.92 388.057 422.92C388.18 422.92 388.334 422.923 388.519 422.928C388.703 422.932 388.843 422.939 388.938 422.949V424.653C388.881 424.639 388.751 424.618 388.547 424.589C388.348 424.556 388.138 424.54 387.915 424.54C387.385 424.54 386.911 424.651 386.495 424.874C386.083 425.091 385.756 425.394 385.515 425.783C385.278 426.166 385.159 426.604 385.159 427.097V434H383.483ZM394.717 434.227C393.666 434.227 392.759 433.995 391.997 433.531C391.24 433.062 390.655 432.409 390.243 431.571C389.836 430.728 389.632 429.748 389.632 428.631C389.632 427.513 389.836 426.528 390.243 425.676C390.655 424.819 391.228 424.152 391.962 423.673C392.7 423.19 393.562 422.949 394.547 422.949C395.115 422.949 395.676 423.044 396.23 423.233C396.784 423.422 397.288 423.73 397.743 424.156C398.197 424.578 398.56 425.136 398.83 425.832C399.099 426.528 399.234 427.385 399.234 428.403V429.114H390.825V427.665H397.53C397.53 427.049 397.407 426.5 397.161 426.017C396.919 425.534 396.573 425.153 396.124 424.874C395.679 424.594 395.153 424.455 394.547 424.455C393.879 424.455 393.302 424.62 392.814 424.952C392.331 425.278 391.959 425.705 391.699 426.23C391.438 426.756 391.308 427.319 391.308 427.92V428.886C391.308 429.71 391.45 430.409 391.734 430.982C392.023 431.55 392.423 431.983 392.935 432.281C393.446 432.575 394.04 432.722 394.717 432.722C395.158 432.722 395.555 432.66 395.911 432.537C396.27 432.409 396.58 432.22 396.841 431.969C397.101 431.713 397.303 431.396 397.445 431.017L399.064 431.472C398.893 432.021 398.607 432.504 398.205 432.92C397.802 433.332 397.305 433.654 396.713 433.886C396.121 434.114 395.456 434.227 394.717 434.227ZM401.335 438.091V423.091H402.954V424.824H403.153C403.276 424.634 403.447 424.393 403.664 424.099C403.887 423.801 404.204 423.536 404.616 423.304C405.033 423.067 405.596 422.949 406.306 422.949C407.225 422.949 408.035 423.179 408.735 423.638C409.436 424.097 409.983 424.748 410.376 425.591C410.769 426.434 410.966 427.428 410.966 428.574C410.966 429.729 410.769 430.731 410.376 431.578C409.983 432.421 409.439 433.074 408.743 433.538C408.047 433.998 407.244 434.227 406.335 434.227C405.634 434.227 405.073 434.111 404.652 433.879C404.23 433.643 403.906 433.375 403.679 433.077C403.451 432.774 403.276 432.523 403.153 432.324H403.011V438.091H401.335ZM402.983 428.545C402.983 429.369 403.103 430.096 403.345 430.726C403.586 431.351 403.939 431.841 404.403 432.196C404.867 432.546 405.435 432.722 406.108 432.722C406.808 432.722 407.393 432.537 407.862 432.168C408.335 431.794 408.69 431.292 408.927 430.662C409.169 430.027 409.289 429.322 409.289 428.545C409.289 427.778 409.171 427.087 408.934 426.472C408.702 425.851 408.35 425.361 407.876 425.001C407.407 424.637 406.818 424.455 406.108 424.455C405.426 424.455 404.853 424.627 404.389 424.973C403.925 425.314 403.574 425.792 403.338 426.408C403.101 427.018 402.983 427.731 402.983 428.545ZM416.283 434.256C415.592 434.256 414.965 434.125 414.401 433.865C413.838 433.6 413.39 433.219 413.059 432.722C412.728 432.22 412.562 431.614 412.562 430.903C412.562 430.278 412.685 429.772 412.931 429.384C413.177 428.991 413.506 428.683 413.918 428.46C414.33 428.238 414.785 428.072 415.282 427.963C415.784 427.849 416.288 427.759 416.795 427.693C417.458 427.608 417.995 427.544 418.407 427.501C418.824 427.454 419.127 427.376 419.316 427.267C419.51 427.158 419.607 426.969 419.607 426.699V426.642C419.607 425.941 419.415 425.397 419.032 425.009C418.653 424.62 418.078 424.426 417.306 424.426C416.506 424.426 415.879 424.601 415.424 424.952C414.969 425.302 414.65 425.676 414.465 426.074L412.874 425.506C413.158 424.843 413.537 424.327 414.011 423.957C414.489 423.583 415.01 423.323 415.573 423.176C416.141 423.025 416.7 422.949 417.249 422.949C417.6 422.949 418.002 422.991 418.457 423.077C418.916 423.157 419.359 423.325 419.785 423.581C420.216 423.837 420.573 424.223 420.857 424.739C421.141 425.255 421.283 425.946 421.283 426.812V434H419.607V432.523H419.522C419.408 432.759 419.219 433.013 418.954 433.283C418.689 433.553 418.336 433.782 417.896 433.972C417.455 434.161 416.918 434.256 416.283 434.256ZM416.539 432.75C417.202 432.75 417.761 432.62 418.215 432.359C418.674 432.099 419.02 431.763 419.252 431.351C419.489 430.939 419.607 430.506 419.607 430.051V428.517C419.536 428.602 419.38 428.68 419.138 428.751C418.902 428.818 418.627 428.877 418.315 428.929C418.007 428.976 417.706 429.019 417.413 429.057C417.124 429.09 416.889 429.118 416.71 429.142C416.274 429.199 415.867 429.291 415.488 429.419C415.114 429.542 414.811 429.729 414.579 429.98C414.352 430.226 414.238 430.562 414.238 430.989C414.238 431.571 414.453 432.011 414.884 432.31C415.32 432.603 415.871 432.75 416.539 432.75ZM423.893 434V423.091H425.513V424.739H425.626C425.825 424.199 426.185 423.761 426.706 423.425C427.227 423.089 427.814 422.92 428.467 422.92C428.59 422.92 428.744 422.923 428.929 422.928C429.114 422.932 429.253 422.939 429.348 422.949V424.653C429.291 424.639 429.161 424.618 428.957 424.589C428.759 424.556 428.548 424.54 428.325 424.54C427.795 424.54 427.321 424.651 426.905 424.874C426.493 425.091 426.166 425.394 425.925 425.783C425.688 426.166 425.57 426.604 425.57 427.097V434H423.893ZM434.096 434.256C433.405 434.256 432.777 434.125 432.214 433.865C431.65 433.6 431.203 433.219 430.871 432.722C430.54 432.22 430.374 431.614 430.374 430.903C430.374 430.278 430.497 429.772 430.744 429.384C430.99 428.991 431.319 428.683 431.731 428.46C432.143 428.238 432.597 428.072 433.094 427.963C433.596 427.849 434.101 427.759 434.607 427.693C435.27 427.608 435.808 427.544 436.219 427.501C436.636 427.454 436.939 427.376 437.129 427.267C437.323 427.158 437.42 426.969 437.42 426.699V426.642C437.42 425.941 437.228 425.397 436.844 425.009C436.466 424.62 435.89 424.426 435.119 424.426C434.318 424.426 433.691 424.601 433.237 424.952C432.782 425.302 432.462 425.676 432.278 426.074L430.687 425.506C430.971 424.843 431.35 424.327 431.823 423.957C432.301 423.583 432.822 423.323 433.386 423.176C433.954 423.025 434.513 422.949 435.062 422.949C435.412 422.949 435.815 422.991 436.269 423.077C436.728 423.157 437.171 423.325 437.597 423.581C438.028 423.837 438.386 424.223 438.67 424.739C438.954 425.255 439.096 425.946 439.096 426.812V434H437.42V432.523H437.335C437.221 432.759 437.031 433.013 436.766 433.283C436.501 433.553 436.148 433.782 435.708 433.972C435.268 434.161 434.73 434.256 434.096 434.256ZM434.352 432.75C435.014 432.75 435.573 432.62 436.028 432.359C436.487 432.099 436.833 431.763 437.065 431.351C437.301 430.939 437.42 430.506 437.42 430.051V428.517C437.349 428.602 437.192 428.68 436.951 428.751C436.714 428.818 436.44 428.877 436.127 428.929C435.819 428.976 435.519 429.019 435.225 429.057C434.936 429.09 434.702 429.118 434.522 429.142C434.086 429.199 433.679 429.291 433.3 429.419C432.926 429.542 432.623 429.729 432.391 429.98C432.164 430.226 432.05 430.562 432.05 430.989C432.05 431.571 432.266 432.011 432.697 432.31C433.132 432.603 433.684 432.75 434.352 432.75ZM446.45 423.091V424.511H440.797V423.091H446.45ZM442.445 420.477H444.121V430.875C444.121 431.348 444.189 431.704 444.327 431.94C444.469 432.172 444.649 432.329 444.866 432.409C445.089 432.485 445.323 432.523 445.57 432.523C445.754 432.523 445.906 432.513 446.024 432.494C446.143 432.471 446.237 432.452 446.308 432.438L446.649 433.943C446.536 433.986 446.377 434.028 446.173 434.071C445.97 434.118 445.712 434.142 445.399 434.142C444.926 434.142 444.462 434.04 444.007 433.837C443.557 433.633 443.183 433.323 442.885 432.906C442.591 432.49 442.445 431.964 442.445 431.33V420.477ZM448.522 434V423.091H450.199V434H448.522ZM449.375 421.273C449.048 421.273 448.766 421.161 448.529 420.939C448.297 420.716 448.181 420.449 448.181 420.136C448.181 419.824 448.297 419.556 448.529 419.334C448.766 419.111 449.048 419 449.375 419C449.701 419 449.981 419.111 450.213 419.334C450.449 419.556 450.568 419.824 450.568 420.136C450.568 420.449 450.449 420.716 450.213 420.939C449.981 421.161 449.701 421.273 449.375 421.273ZM457.251 434.227C456.266 434.227 455.402 433.993 454.659 433.524C453.92 433.055 453.342 432.4 452.926 431.557C452.514 430.714 452.308 429.729 452.308 428.602C452.308 427.466 452.514 426.474 452.926 425.626C453.342 424.779 453.92 424.121 454.659 423.652C455.402 423.183 456.266 422.949 457.251 422.949C458.236 422.949 459.098 423.183 459.836 423.652C460.58 424.121 461.157 424.779 461.569 425.626C461.986 426.474 462.194 427.466 462.194 428.602C462.194 429.729 461.986 430.714 461.569 431.557C461.157 432.4 460.58 433.055 459.836 433.524C459.098 433.993 458.236 434.227 457.251 434.227ZM457.251 432.722C457.999 432.722 458.615 432.53 459.098 432.146C459.581 431.763 459.938 431.259 460.17 430.634C460.402 430.009 460.518 429.331 460.518 428.602C460.518 427.873 460.402 427.194 460.17 426.564C459.938 425.934 459.581 425.425 459.098 425.037C458.615 424.649 457.999 424.455 457.251 424.455C456.503 424.455 455.887 424.649 455.404 425.037C454.922 425.425 454.564 425.934 454.332 426.564C454.1 427.194 453.984 427.873 453.984 428.602C453.984 429.331 454.1 430.009 454.332 430.634C454.564 431.259 454.922 431.763 455.404 432.146C455.887 432.53 456.503 432.722 457.251 432.722ZM465.98 427.438V434H464.304V423.091H465.923V424.795H466.065C466.321 424.241 466.709 423.796 467.23 423.46C467.751 423.119 468.423 422.949 469.247 422.949C469.985 422.949 470.632 423.1 471.186 423.403C471.74 423.702 472.171 424.156 472.478 424.767C472.786 425.373 472.94 426.14 472.94 427.068V434H471.264V427.182C471.264 426.325 471.041 425.657 470.596 425.179C470.151 424.696 469.54 424.455 468.764 424.455C468.229 424.455 467.751 424.571 467.329 424.803C466.913 425.035 466.583 425.373 466.342 425.818C466.1 426.263 465.98 426.803 465.98 427.438ZM476.775 434.114C476.425 434.114 476.124 433.988 475.873 433.737C475.622 433.486 475.497 433.186 475.497 432.835C475.497 432.485 475.622 432.184 475.873 431.933C476.124 431.682 476.425 431.557 476.775 431.557C477.126 431.557 477.426 431.682 477.677 431.933C477.928 432.184 478.054 432.485 478.054 432.835C478.054 433.067 477.994 433.28 477.876 433.474C477.762 433.669 477.609 433.825 477.414 433.943C477.225 434.057 477.012 434.114 476.775 434.114Z"
                  fill="#737373"
                />
                <path
                  d="M139.999 274.185H194.174L221.408 309.221L248.201 340.43L298.695 403.732H239.221L204.478 361.04L186.666 335.719L139.999 274.185ZM303.258 228.254C303.258 261.132 297.026 289.102 284.562 312.165C272.196 335.229 255.316 352.845 233.921 365.015C212.624 377.086 188.678 383.122 162.081 383.122C135.288 383.122 111.244 377.037 89.947 364.868C68.6502 352.698 51.8189 335.082 39.453 312.018C27.0871 288.955 20.9042 261.034 20.9042 228.254C20.9042 195.377 27.0871 167.406 39.453 144.343C51.8189 121.28 68.6502 103.712 89.947 91.6408C111.244 79.4712 135.288 73.3864 162.081 73.3864C188.678 73.3864 212.624 79.4712 233.921 91.6408C255.316 103.712 272.196 121.28 284.562 144.343C297.026 167.406 303.258 195.377 303.258 228.254ZM238.632 228.254C238.632 206.957 235.442 188.997 229.063 174.374C222.782 159.751 213.9 148.661 202.417 141.104C190.935 133.547 177.489 129.769 162.081 129.769C146.673 129.769 133.228 133.547 121.745 141.104C110.262 148.661 101.331 159.751 94.9522 174.374C88.6711 188.997 85.5306 206.957 85.5306 228.254C85.5306 249.551 88.6711 267.511 94.9522 282.134C101.331 296.757 110.262 307.847 121.745 315.404C133.228 322.961 146.673 326.739 162.081 326.739C177.489 326.739 190.935 322.961 202.417 315.404C213.9 307.847 222.782 296.757 229.063 282.134C235.442 267.511 238.632 249.551 238.632 228.254Z"
                  fill="#171717"
                />
                <path
                  d="M308.011 350.636L320.668 390.42H321.153L333.835 350.636H346.108L328.057 403H313.79L295.713 350.636H308.011ZM357.369 403.741C354.863 403.741 352.63 403.307 350.67 402.438C348.709 401.551 347.158 400.247 346.016 398.526C344.891 396.787 344.329 394.622 344.329 392.031C344.329 389.849 344.729 388.017 345.53 386.534C346.332 385.051 347.422 383.858 348.803 382.955C350.184 382.051 351.752 381.369 353.508 380.909C355.28 380.449 357.138 380.125 359.082 379.938C361.366 379.699 363.207 379.477 364.604 379.273C366.002 379.051 367.016 378.727 367.647 378.301C368.278 377.875 368.593 377.244 368.593 376.409V376.256C368.593 374.636 368.082 373.384 367.059 372.497C366.053 371.611 364.621 371.168 362.763 371.168C360.803 371.168 359.244 371.602 358.084 372.472C356.925 373.324 356.158 374.398 355.783 375.693L345.709 374.875C346.221 372.489 347.226 370.426 348.726 368.688C350.226 366.932 352.161 365.585 354.53 364.648C356.917 363.693 359.678 363.216 362.815 363.216C364.996 363.216 367.084 363.472 369.079 363.983C371.09 364.494 372.871 365.287 374.422 366.361C375.991 367.435 377.226 368.815 378.13 370.503C379.033 372.173 379.485 374.176 379.485 376.511V403H369.155V397.554H368.849C368.218 398.781 367.374 399.864 366.317 400.801C365.261 401.722 363.991 402.446 362.508 402.974C361.025 403.486 359.312 403.741 357.369 403.741ZM360.488 396.224C362.09 396.224 363.505 395.909 364.732 395.278C365.959 394.631 366.922 393.761 367.621 392.67C368.32 391.58 368.67 390.344 368.67 388.963V384.795C368.329 385.017 367.86 385.222 367.263 385.409C366.684 385.58 366.028 385.741 365.295 385.895C364.562 386.031 363.829 386.159 363.096 386.278C362.363 386.381 361.698 386.474 361.101 386.56C359.823 386.747 358.707 387.045 357.752 387.455C356.797 387.864 356.056 388.418 355.528 389.116C354.999 389.798 354.735 390.651 354.735 391.673C354.735 393.156 355.272 394.29 356.346 395.074C357.437 395.841 358.817 396.224 360.488 396.224ZM411.443 386.278V363.727H422.335V403H411.878V395.866H411.469C410.582 398.168 409.108 400.017 407.045 401.415C405 402.812 402.503 403.511 399.554 403.511C396.929 403.511 394.619 402.915 392.625 401.722C390.63 400.528 389.071 398.832 387.946 396.634C386.838 394.435 386.275 391.801 386.258 388.733V363.727H397.15V386.79C397.167 389.108 397.79 390.94 399.017 392.287C400.244 393.634 401.889 394.307 403.951 394.307C405.264 394.307 406.491 394.009 407.633 393.412C408.775 392.798 409.696 391.895 410.395 390.702C411.111 389.509 411.46 388.034 411.443 386.278ZM440.262 350.636V403H429.37V350.636H440.262ZM468.2 363.727V371.909H444.549V363.727H468.2ZM449.919 354.318H460.811V390.932C460.811 391.937 460.964 392.722 461.271 393.284C461.578 393.83 462.004 394.213 462.549 394.435C463.112 394.656 463.76 394.767 464.492 394.767C465.004 394.767 465.515 394.724 466.027 394.639C466.538 394.537 466.93 394.46 467.203 394.409L468.916 402.514C468.37 402.685 467.603 402.881 466.615 403.102C465.626 403.341 464.424 403.486 463.01 403.537C460.385 403.639 458.083 403.29 456.106 402.489C454.146 401.687 452.62 400.443 451.529 398.756C450.438 397.068 449.902 394.937 449.919 392.364V354.318Z"
                  fill="black"
                />
              </svg>
            </div>
          </div>

          {/* Right – Headline + search */}
          <div className=" flex flex-col items-center lg:items-start text-center lg:text-left">
            <h1 className="text-4xl md:text-5xl lg:text-6xl font-black text-gray-900 leading-[1.1] mb-2 tracking-tight">
              Question papers.
              <br />
              <span className="text-transparent bg-clip-text bg-gradient-to-r from-[#19A1E6] to-[#155DFC]">
                One search away.
              </span>
            </h1>

            <p className="text-sm md:text-base text-gray-500 mb-8 max-w-lg leading-relaxed mt-4">
              Browse, filter, and download semester-wise question papers.
              Organized, verified, and ready for your prep.
            </p>

            {/* Search bar */}
            {/* Search bar container */}
            <div className="w-full max-w-lg">
              <form
                onSubmit={onSearchSubmit}
                className="flex items-center w-full border border-gray-200 rounded-2xl md:rounded-full bg-white shadow-sm p-1.5 focus-within:ring-2 focus-within:ring-blue-100 transition-all flex-col md:flex-row gap-2 md:gap-0"
              >
                <div className="flex items-center w-full px-4 py-1">
                  <Search className="w-4 h-4 text-gray-400 flex-shrink-0" />
                  <input
                    type="text"
                    placeholder="Search for course codes or course titles..."
                    className="w-full py-2.5 px-3 text-sm bg-transparent border-none focus:ring-0 text-gray-700 placeholder-gray-400 outline-none truncate"
                    value={searchTerm}
                    onChange={(e) => setSearchTerm(e.target.value)}
                  />
                </div>
                <button
                  type="submit"
                  className="w-full md:w-auto bg-[#171717] text-white text-[13px] font-medium px-8 py-3 rounded-xl md:rounded-full hover:bg-black transition-colors flex justify-center items-center flex-shrink-0"
                >
                  <Search className="w-3.5 h-3.5 mr-2" />
                  Search
                </button>
              </form>
            </div>
          </div>
        </div>
      </section>

      {/* ── RECENTLY UPLOADED / SEARCH RESULTS ── */}
      <section className="pt-10 pb-16 px-6 lg:px-8" id="results-section">
        <div className="max-w-6xl mx-auto">
          <div className="text-center mb-10">
            <h2 className="text-2xl font-bold text-gray-900 mb-2 tracking-tight">
              {isSearching ? "Search Results" : "Recently Uploaded Papers"}
            </h2>
            <p className="text-sm text-gray-500">
              {isSearching
                ? `Showing matching papers for "${searchTerm}"`
                : "One click away from all your exam prep materials."}
            </p>
          </div>

          <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
            {!isLoading
              ? recentPapers.length > 0
                ? recentPapers.map((paper, idx) => {
                    const color = iconColors[idx % iconColors.length];
                    return (
                      <div
                        key={paper.id}
                        className="bg-white border border-gray-100 rounded-2xl p-6  hover:shadow-md transition-shadow cursor-default group"
                      >
                        {/* Top row */}
                        <div className="flex items-center justify-between mb-5">
                          <div className="flex items-center gap-2.5">
                            <div
                              className={`${color.bg} ${color.text} p-2 rounded-lg`}
                            >
                              <FileText className="w-4 h-4" strokeWidth={2.5} />
                            </div>
                            <span className="text-[11px] font-semibold text-gray-400 uppercase tracking-widest">
                              {paper.course_code || "N/A"}
                            </span>
                          </div>
                          <div className="flex items-center gap-3">
                            <span
                              className={`text-[10px] font-bold px-2.5 py-1 rounded-md ${color.bg} ${color.text}`}
                            >
                              {paper.year}
                            </span>
                            <button
                              onClick={async (e) => {
                                e.stopPropagation();
                                if (!user) {
                                  openLoginModal();
                                  return;
                                }
                                try {
                                  const response = await api.post(
                                    `/papers/favorite/${paper.id}`,
                                  );
                                  setRecentPapers(
                                    recentPapers.map((p) =>
                                      p.id === paper.id
                                        ? {
                                            ...p,
                                            is_favorite:
                                              response.data.isFavorite,
                                          }
                                        : p,
                                    ),
                                  );
                                } catch (error) {
                                  console.error(
                                    "Error toggling favourite:",
                                    error,
                                  );
                                }
                              }}
                              className={`transition-colors ${
                                paper.is_favorite
                                  ? "text-red-500"
                                  : "text-gray-300 hover:text-red-400"
                              }`}
                              title={
                                user
                                  ? paper.is_favorite
                                    ? "Remove from favourites"
                                    : "Add to favourites"
                                  : "Login to favourite"
                              }
                            >
                              <Heart
                                className={`w-4 h-4 ${paper.is_favorite ? "fill-current" : ""}`}
                              />
                            </button>
                          </div>
                        </div>

                        {/* Title */}
                        <h3 className="text-[15px] font-bold text-gray-900 mb-1.5 leading-snug truncate">
                          {paper.title}
                        </h3>
                        <p className="text-[12px] text-gray-500 font-medium mb-4">
                          {paper.exam_type || "Final Exam"} • Semester{" "}
                          {paper.semester || "N/A"}
                        </p>

                        {/* Actions */}
                        <div className="flex items-center gap-2 mb-4">
                          <button
                            onClick={() => {
                              if (!user) {
                                openLoginModal();
                                return;
                              }
                              const viewPaper = async () => {
                                try {
                                  const response = await api.get(
                                    `/papers/download/${paper.id}?inline=true`,
                                    { responseType: "blob" },
                                  );
                                  const url = window.URL.createObjectURL(
                                    new Blob([response.data], {
                                      type: "application/pdf",
                                    }),
                                  );
                                  window.open(url, "_blank");

                                  // Update local state for views
                                  setRecentPapers(
                                    recentPapers.map((p) =>
                                      p.id === paper.id
                                        ? { ...p, views: (p.views || 0) + 1 }
                                        : p,
                                    ),
                                  );
                                } catch (err) {
                                  console.error("View failed", err);
                                }
                              };
                              viewPaper();
                            }}
                            className="flex-1 bg-gray-900 text-white hover:bg-black py-2.5 rounded-full text-[13px] font-bold transition-colors flex items-center justify-center gap-2"
                          >
                            <Eye className="w-4 h-4" /> View
                          </button>
                          <button
                            onClick={() =>
                              handleDownload(paper.id, paper.title)
                            }
                            className="bg-white text-gray-400 border border-gray-200 p-2.5 rounded-full hover:bg-gray-50 transition-colors"
                          >
                            <Download className="w-4 h-4" />
                          </button>
                        </div>

                        {/* Tiny stats */}
                        <div className="flex justify-between px-2 text-[11px] text-gray-400 font-medium">
                          <div className="flex gap-4">
                            <span>{paper.downloads || 0} DLs</span>
                            <span>{paper.views || 0} Views</span>
                          </div>
                          <span>{paper.favorites_count || 0} Favs</span>
                        </div>
                      </div>
                    );
                  })
                : !isLoading && (
                    <div className="col-span-full text-center py-20">
                      <div className="w-16 h-16 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-4">
                        <Search className="w-6 h-6 text-gray-300" />
                      </div>
                      <h3 className="text-lg font-bold text-gray-900 mb-1">
                        No matches found
                      </h3>
                      <p className="text-sm text-gray-500">
                        Try searching for something else.
                      </p>
                    </div>
                  )
              : Array.from({ length: 6 }).map((_, i) => (
                  <div
                    key={i}
                    className="bg-white border border-gray-100 rounded-2xl p-6 shadow-sm animate-pulse"
                  >
                    <div className="flex items-center justify-between mb-5">
                      <div className="flex items-center gap-3">
                        <div className="w-8 h-8 bg-gray-100 rounded-lg" />
                        <div className="w-20 h-3 bg-gray-100 rounded" />
                      </div>
                      <div className="w-12 h-5 bg-gray-100 rounded-md" />
                    </div>
                    <div className="w-3/4 h-4 bg-gray-100 rounded mb-3" />
                    <div className="w-1/2 h-3 bg-gray-100 rounded" />
                    <div className="mt-8 flex gap-2">
                      <div className="flex-1 h-10 bg-gray-50 rounded-xl" />
                      <div className="w-10 h-10 bg-gray-50 rounded-xl" />
                    </div>
                  </div>
                ))}
          </div>

          {/* View all link */}
          {recentPapers.length > 0 && (
            <div className="flex justify-center mt-10">
              <Link
                to="/search"
                className="flex items-center gap-1.5 text-sm text-gray-500 hover:text-black font-semibold transition-colors"
              >
                View all papers <ArrowRight className="w-4 h-4" />
              </Link>
            </div>
          )}
        </div>
      </section>

      {/* ── "FROM THE MINDS" PILL ── */}
      <div className="flex justify-center pb-8 px-4">
        <div className="flex items-center gap-2.5 bg-gray-50 border border-gray-100 rounded-full px-5 py-2 cursor-pointer hover:bg-gray-100 transition-colors">
          <div className="w-5 h-5 rounded-full bg-[#19A1E6] flex items-center justify-center">
            <User className="w-3 h-3 text-white" strokeWidth={3} />
          </div>
          <span className="text-[13px] font-semibold text-gray-600">
            From the Minds of Our Students
          </span>
          <ArrowRight className="w-3.5 h-3.5 text-gray-400" />
        </div>
      </div>

      {/* ── CTA DARK CARD ── */}
      <section className="py-8 px-4 sm:px-6 lg:px-8 mb-12">
        <div className="max-w-4xl mx-auto">
          <CtaCardWithParticles>
            <h2 className="text-2xl md:text-[28px] font-bold mb-3 tracking-tight">
              Can’t Find Your Exam Papers?
            </h2>
            <p className="text-[13px] md:text-sm text-gray-400 mb-8 max-w-sm mx-auto leading-relaxed">
              Give a request to our Team or Get Support from our Team to help
              you find what you need.
            </p>
            <div className="flex flex-col sm:flex-row justify-center items-center gap-3">
              <button className="w-full sm:w-auto bg-white text-black px-8 py-3 rounded-full text-[13px] font-bold hover:bg-gray-100 transition-colors">
                Request Paper
              </button>
              <button className="w-full sm:w-auto bg-transparent border border-gray-600/50 text-white px-8 py-3 rounded-full text-[13px] font-semibold hover:bg-white/10 transition-colors">
                Contact Support
              </button>
            </div>
          </CtaCardWithParticles>
        </div>
      </section>

      {/* ── FOOTER ── */}
      <footer className="py-8 text-center text-[12px] text-gray-400 border-t border-gray-100 font-medium px-4">
        © 2026 Designed & Developed by Kristu Jayanti Software Development
        Centre. All rights reserved.
      </footer>
    </div>
  );
};

export default LandingPage;

/* ── Particle canvas component for the CTA card ── */
function CtaCardWithParticles({ children }) {
  const canvasRef = useRef(null);
  const containerRef = useRef(null);
  const particlesRef = useRef([]);
  const animFrameRef = useRef(null);

  useEffect(() => {
    const canvas = canvasRef.current;
    const container = containerRef.current;
    if (!canvas || !container) return;
    const ctx = canvas.getContext("2d");

    const resize = () => {
      const { width, height } = container.getBoundingClientRect();
      canvas.width = width * window.devicePixelRatio;
      canvas.height = height * window.devicePixelRatio;
      ctx.scale(window.devicePixelRatio, window.devicePixelRatio);
      canvas.style.width = width + "px";
      canvas.style.height = height + "px";
    };

    const PARTICLE_COUNT = 40;

    const createParticle = (w, h) => ({
      x: Math.random() * w,
      y: Math.random() * h,
      r: Math.random() * 1.8 + 0.5,
      vx: (Math.random() - 0.5) * 0.3,
      vy: -(Math.random() * 0.4 + 0.15),
      opacity: Math.random() * 0.5 + 0.15,
    });

    resize();
    const { width: cw, height: ch } = container.getBoundingClientRect();
    particlesRef.current = Array.from({ length: PARTICLE_COUNT }, () =>
      createParticle(cw, ch),
    );

    const draw = () => {
      const { width: w, height: h } = container.getBoundingClientRect();
      ctx.clearRect(0, 0, w, h);

      particlesRef.current.forEach((p) => {
        p.x += p.vx;
        p.y += p.vy;

        // wrap around
        if (p.y < -5) {
          p.y = h + 5;
          p.x = Math.random() * w;
        }
        if (p.x < -5) p.x = w + 5;
        if (p.x > w + 5) p.x = -5;

        ctx.beginPath();
        ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
        ctx.fillStyle = `rgba(255,255,255,${p.opacity})`;
        ctx.fill();
      });

      animFrameRef.current = requestAnimationFrame(draw);
    };

    draw();
    window.addEventListener("resize", resize);

    return () => {
      cancelAnimationFrame(animFrameRef.current);
      window.removeEventListener("resize", resize);
    };
  }, []);

  return (
    <div
      ref={containerRef}
      className="relative overflow-hidden rounded-[2rem] p-10 md:p-14 text-center text-white bg-gradient-to-br from-[#12141D] to-[#1E2132] shadow-2xl shadow-blue-900/10"
    >
      <canvas
        ref={canvasRef}
        className="absolute inset-0 pointer-events-none"
      />
      <div className="relative z-10">{children}</div>
    </div>
  );
}
